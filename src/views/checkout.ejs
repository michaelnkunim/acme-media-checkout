<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>ACME Media</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <meta name="theme-color" content="#7952b3">
    <style>
        .form-check {
            float: left;
            display: inline;
            margin-right: 10px;
        }
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500&display=swap');

    </style>
    <link href="https://getbootstrap.com/docs/5.0/examples/checkout/form-validation.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <script src="https://getbootstrap.com/docs/5.0/examples/checkout/form-validation.js"></script>

</head>




<body class="bg-light">    
    <%if(do_payment !== "true") {%>
        <section class="section-products">
            <div class="container-fluid">
                    <div class="row justify-content-center text-center">
                            <div class="col-md-8 col-lg-6">
                                    <div class="header">
                                           
                                            <h2>Acme Media Limited</h2>
                                    </div>
                            </div>
                    </div>
                    <div class="row">
                        <div class="col-9 row">
                            <% items.forEach((item) => { %>
                                <div class="col-md-4 col-lg-4 col-xl-4">
                                    <div id="product-<%= item.id %>" class="single-product">
                                        <!-- <a href="<%= item.url %>" style="cursor: pointer;width:1000%;Width:1000%"> -->
                                      <div class="part-1" style="background: url(<%=item.image%>);">
                                        <span class="new">new</span>
                                        <ul>
                                          <li><i class="fas fa-shopping-cart"></i></li>
                                          <li><i class="fas fa-heart"></i></li>
                                          <li><i class="fas fa-plus"></i></li>
                                          <li><i class="fas fa-expand"></i></li>
                                        </ul>
                                      </div>
                                      <div class="part-2 row m-2">
                                        <div class="col-md-6 col-lg-6 col-xl-6">
                                            <h3 class="product-title"><%= item.name %></h3>
                                            <h4 class="product-price">$<%= item.price %></h4>
                                        </div>
                                        <div class="col-md-6 col-lg-6 col-xl-6">
                                           
                                    <input type="number" class="form-control input-sm" id="input_<%= item.id %>" 
                                        placeholder="quantity" value="1">
    
                                        <button  data-item="<%= JSON.stringify(item) %>" data-id="<%= item.id %>"  class="w-100 mt-1 btn btn-sm btn-primary addToCart" type="button" >Add To Cart </button>
    
                                        </div>
                                      </div>
                                    <!-- </a> -->
                                    </div>
                                </div>
                              <% }) %>
                        </div>

                        <div class="col-md-4 col-lg-3 order-md-last">
                            <h4 class="d-flex justify-content-between align-items-center mb-3">
                              <span class="text-primary">Your cart</span>
                              <span id="cartItemCount" class="badge bg-primary rounded-pill">Loading...</span>
                            </h4>
                            <ul id="cartItemsList" class="list-group mb-3">
                              <!-- Cart items will be dynamically populated here -->
                            </ul>

                            <div  class="">
                             <span id="totalQuantity" class="text-primary"></span>
                              </div>
                            <div  class="">
                             <span id="totalItems" class="text-primary"></span>
                            </div>
                            <div id="totalPrice" class="">
                                <span id="totalPrice" class="text-primary"></span>
                            </div>
                          
                            <% if(typeof do_payment === 'undefined') {%>
                            <a href="/?do_payment=true">
                              <button id="submitForm" class="w-100 btn btn-primary btn-lg" type="submit">
                                Go To Checkout   
                            </a>
                            <%}%>
                          </div>

                     </div>
                    </div>
            </div>
        </section>
        <%}%>


       <div class="container">
        <%if(do_payment === "true") {%>
        <main>
            <div class="py-5 text-center">
                <h2>Checkout form</h2>
            </div>

            <div class="row g-5">
                <div class="col-md-4 col-lg-4 order-md-last">
                    <h4 class="d-flex justify-content-between align-items-center mb-3">
                      <span class="text-primary">Your cart</span>
                      <span id="cartItemCount" class="badge bg-primary rounded-pill">Loading...</span>
                    </h4>
                    <ul id="cartItemsList" class="list-group mb-3">
                      <!-- Cart items will be dynamically populated here -->
                    </ul>

                    <div  class="">
                     <span id="totalQuantity" class="text-primary"></span>
                      </div>
                    <div  class="">
                     <span id="totalItems" class="text-primary"></span>
                    </div>
                    <div id="totalPrice" class="">
                        <span id="totalPrice" class="text-primary"></span>
                    </div>
                  </div>
                <div class="col-md-4 col-lg-4">
                    <h4 class="mb-3">Billing address</h4>
                    <form class="needs-validation" novalidate  id="payForm" method="POST" action="/routes/payment">
                        <div class="row g-3">
                            <div class="col-12">
                                <label for="email" class="form-label">Email <span
                                        class="text-muted">(Optional)</span></label>
                                <input type="email" class="form-control" id="email" name="email"
                                    placeholder="you@example.com" value="john.doe@gmail.com">
                                <div class="invalid-feedback">
                                    Please enter a valid email address for shipping updates.
                                </div>
                            </div>

                            <div class="col-12">
                                <label for="address" class="form-label">Address</label>
                                <input type="text" class="form-control" id="address" name="address"
                                    placeholder="1234 Main St" required value="14 Okai Lane, Chrsitian Village Achimota">
                                <div class="invalid-feedback">
                                    Please enter your shipping address.
                                </div>
                            </div>

                            <div class="col-12">
                                <label for="address2" class="form-label">Address 2 <span
                                        class="text-muted">(Optional)</span></label>
                                <input type="text" class="form-control" id="address2" name="addres2"
                                    placeholder="Apartment or suite" value="APT C1">
                            </div>

                            <div class="col-md-12">
                                <label for="country" class="form-label">Country</label>
                                <select class="form-select" id="country" name="country" required>
                                    <option value="">Choose...</option>
                                    <option selected>Ghana</option>
                                    <option>Nigeria</option>
                                    <option>Kenya</option>
                                </select>
                                <div class="invalid-feedback">
                                    Please select a valid country.
                                </div>
                            </div>

                            <div class="col-md-12">
                                <label for="state" class="form-label">State(Region)</label>
                                <select class="form-select" id="state" name="state" required>
                                    <option value="">Choose...</option>
                                    <option selected>Accra</option>
                                </select>
                                <div class="invalid-feedback">
                                    Please provide a valid state.
                                </div>
                            </div>

                            <div class="col-md-12">
                                <label for="zip" class="form-label">Zip</label>
                                <input type="text" class="form-control" id="zip" name="zip" placeholder="" value="06108" required>
                                <div class="invalid-feedback">
                                    Zip code required.
                                </div>
                            </div>
                        </div>
                        </form>
                        </div>
                        <div class="col-md-4 col-lg-4">
                        <hr class="my-4">

                        <h4 class="mb-3">Payment</h4>

                        <div class="my-3 row">
                            <div class="col-md-4">
                                <input value="card" id="credit" name="paymentMethod" type="radio"
                                    class="form-check-input" checked required>
                                <label class="form-check-label" for="credit">Credit card</label>
                            </div>
                            <div class="col-md-4">
                                <input value="momo" id="debit" name="paymentMethod" type="radio"
                                    class="form-check-input" required>
                                <label class="form-check-label" for="debit">Mobile Money</label>
                            </div>
                        </div>
                        <hr class="my-4">

                        <div id="credit-card-form" class="row my-3">
                            <div class="col-md-12">
                                <label for="cc-name" class="form-label">Name on card</label>
                                <input type="text" class="form-control" id="cc-name" name="nameOnCard" placeholder=""
                                    required value="John Star Doe">
                                <!-- <small class="text-muted">Full name as displayed on card</small> -->
                                <div class="invalid-feedback">
                                    Name on card is required
                                </div>
                            </div>

                            <div class="col-md-12 mt-2">
                                <label for="cc-number" class="form-label">Credit card number</label>
                                <input type="text" class="form-control" id="cardNumber" name="cardNumber" placeholder="" value="2424505090909090" required>
                                <span id="validationMessage"></span>
                                <div class="invalid-feedback">
                                    Credit card number is required
                                </div>
                            </div>

                            <br/>

                            <div class="col-md-6 col-lg-6">
                                <label for="cc-expiration" class="form-label">Expiration</label>
                                <input type="text" class="form-control" id="expirationDate" name="expirationDate" placeholder="" value="2022/05" required>
                                <div class="invalid-feedback">
                                    Expiration date required
                                </div>
                            </div>

                            <div class="col-md-6 col-lg-6">
                                <label for="cc-cvv" class="form-label">CVV</label>
                                <input type="text" class="form-control" id="cvv" name="cvv" value="321" placeholder="" required>
                                <div class="invalid-feedback">
                                    Security code required
                                </div>
                            </div>
                        </div>

                        <div id="mobile-money-form" class="row my-3" style="display: none;">
                            <div class="col-md-12">
                                <label for="cc-name" class="form-label">Phone Number</label>
                                <input type="text" class="form-control" id="phoneNumber" name="momoNumber" placeholder="" value="+2332458938XX"
                                    required value="John Star Doe">
                                <div class="invalid-feedback">
                                    Phone Number is Required
                                </div>
                            </div>
                        </div>

                        <hr class="my-4">

                        <input class="w-100 btn btn-primary btn-lg" type="submit" name="Submit">
                     
                    </form>
                </div>
            </div>
        </main>
        <%}%>
        <footer class="my-5 pt-5 text-muted text-center text-small">
            <p class="mb-1">&copy; 2023 Acme Media</p>
        </footer>
    </div>


    <script src="js/action.js"></script>
    <script>
        const creditCardInput = document.getElementById('cardNumber');
const validationMessage = document.getElementById('validationMessage');

creditCardInput.addEventListener('input', function() {
  const creditCardNumber = this.value;
  const isValid = validateCreditCard(creditCardNumber);
  console.log(isValid);
  if (isValid) {
    validationMessage.textContent = 'Credit card number is valid.';
    validationMessage.style.color = 'green';
  } else {
    validationMessage.textContent = 'Credit card number is invalid.';
    validationMessage.style.color = 'red';
  }
});

function validateCreditCard(creditCardNumber) {
  // Regular expression pattern for credit card number validation
  const regex = /^(?:[0-9]{4}-){3}[0-9]{4}$|^[0-9]{16}$/;

  return regex.test(creditCardNumber);
}

    </script>
</body>

</html>